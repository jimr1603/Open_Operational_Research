<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "post",
        "name" : "Spotify &amp; me",
        "headline" : "Spotify &amp; me",
        "description" : "Note This post is analysis on data that I obtained freely - through GDPR, but you’re not getting access to. I’m not sharing my full playing history for the last 3 months with everyone who reads this!
Also, the long delay since last post is because I moved house. Picking this back up now.
 Background GDPR means that EU citizens are entitled to a copy of personal data that a company is holding on them.",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-06-09 00:00:00 &#43;0000 UTC",
        "dateModified" : "2018-06-09 00:00:00 &#43;0000 UTC",
        "url" : "/post/spotify-me/",
        "wordCount" : "4381",
        "keywords" : [ "EDA","GDPR","Spotify","non-open data","json","Blog" ]
    }
    </script>
        
            
                <title>Spotify &amp; me</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.37.1" />
        


        
            <meta name="author" content="James Riley">
        
        
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Spotify &amp; me"/>
<meta name="twitter:description" content="Note This post is analysis on data that I obtained freely - through GDPR, but you’re not getting access to. I’m not sharing my full playing history for the last 3 months with everyone who reads this!
Also, the long delay since last post is because I moved house. Picking this back up now.
 Background GDPR means that EU citizens are entitled to a copy of personal data that a company is holding on them."/>

        <meta property="og:title" content="Spotify &amp; me" />
<meta property="og:description" content="Note This post is analysis on data that I obtained freely - through GDPR, but you’re not getting access to. I’m not sharing my full playing history for the last 3 months with everyone who reads this!
Also, the long delay since last post is because I moved house. Picking this back up now.
 Background GDPR means that EU citizens are entitled to a copy of personal data that a company is holding on them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/spotify-me/" />



<meta property="article:published_time" content="2018-06-09T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-06-09T00:00:00&#43;00:00"/>











        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Spotify &amp; me">
<meta itemprop="description" content="Note This post is analysis on data that I obtained freely - through GDPR, but you’re not getting access to. I’m not sharing my full playing history for the last 3 months with everyone who reads this!
Also, the long delay since last post is because I moved house. Picking this back up now.
 Background GDPR means that EU citizens are entitled to a copy of personal data that a company is holding on them.">


<meta itemprop="datePublished" content="2018-06-09T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-06-09T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="4381">



<meta itemprop="keywords" content="EDA,GDPR,Spotify,non-open data,json," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">Open Operational Research (blog)</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/about/">
                            <i class="fa fa-id-card-o">&nbsp;</i>About
                    </a>
                </li>
            
                <li>
                    <a href="/post/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="https://www.r-bloggers.com/">
                            <i class="fa fa-rss">&nbsp;</i>R-Bloggers
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                            <i class="">&nbsp;</i>About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://www.r-bloggers.com/">
                            <h3>
                                <i class="fa fa-rss">&nbsp;</i>R-Bloggers
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/scrabble-numbers/">Scrabble numbers</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-11-11'>
                                    November 11, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/aint-no-sunshine-in-winter/">&#39;Aint no sunshine ... in winter</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-10-19'>
                                    October 19, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/thanos-did-nothing-wrong/">Thanos did nothing wrong</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-21'>
                                    August 21, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/analysis-on-a-plane/">Analysis on a plane</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-06-13'>
                                    June 13, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/spotify-me/">Spotify &amp; me</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-06-09'>
                                    June 9, 2018</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /post/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fpost%2fspotify-me%2f&amp;text=Spotify%20%26%20me&amp;via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fpost%2fspotify-me%2f&amp;title=Spotify%20%26%20me" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fpost%2fspotify-me%2f&amp;title=Spotify%20%26%20me" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>







<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fpost%2fspotify-me%2f&amp;description=Spotify%20%26%20me" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by James%20Riley&amp;body=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/post/spotify-me/">Spotify &amp; me</a></h1>
            
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2018-06-09'>
            June 9, 2018</time>
        <span class="author">James Riley</span>
        
            <p>21 minute read</p>
        
        
    </div>
</header>


  
    <section id="social-share">
      <ul class="icons">
        



<li>
  <a href="//twitter.com/share?url=%2fpost%2fspotify-me%2f&amp;text=Spotify%20%26%20me&amp;via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fpost%2fspotify-me%2f&amp;title=Spotify%20%26%20me" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fpost%2fspotify-me%2f&amp;title=Spotify%20%26%20me" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>







<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fpost%2fspotify-me%2f&amp;description=Spotify%20%26%20me" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by James%20Riley&amp;body=%2fpost%2fspotify-me%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


      </ul>
    </section>
  

  

  <div id="content">
    <script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotlyjs/plotly-latest.min.js"></script>


<div id="note" class="section level2">
<h2>Note</h2>
<p>This post is analysis on data that I obtained freely - through GDPR, but you’re not getting access to. I’m not sharing my full playing history for the last 3 months with everyone who reads this!</p>
<p>Also, the long delay since last post is because I moved house. Picking this back up now.</p>
</div>
<div id="background" class="section level2">
<h2>Background</h2>
<p>GDPR means that EU citizens are entitled to a copy of personal data that a company is holding on them. In particular, it must be in a machine-readable format.</p>
<p>Right now, Spotify has an interface for downloading the last 90 days of data, and I’m asking them for my whole history. For now, let’s look at the last 90 days. To start - importing the data, and a bit of clean-up.</p>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<p>This is deliberately unorganised. I’m just diving into the data to see what stories it can tell me.</p>
<pre class="r"><code>data &lt;- fromJSON(file=&quot;~/bin/R/data I&#39;ve not yet worked on//my_spotify_data/StreamingHistory.json&quot;) %&gt;%
  bind_rows() %&gt;%
  mutate(time = ymd_hms(time)) %&gt;%
  mutate(artistName = str_split(artistName, &quot;, &quot;))</code></pre>
<p>Let’s start with my top artists. The artistName field is sometimes the band, sometimes including the members of the band. By the looks of things, the first entry in this list is always the band, so let’s look at that.</p>
<pre class="r"><code>
first &lt;- function(x){
  x[[1]]
}

top_artists &lt;- data %&gt;%
  mutate(artistName = map(artistName, first)) %&gt;%
  mutate(artistName = as.character(artistName)) %&gt;%
  group_by(artistName) %&gt;%
  summarise(plays = n()) %&gt;%
  dplyr::arrange(desc(plays)) %&gt;%
  head(10)

top_artists
## # A tibble: 10 x 2
##    artistName       plays
##    &lt;chr&gt;            &lt;int&gt;
##  1 Billy Idol         195
##  2 Green Day          156
##  3 The Offspring      111
##  4 blink-182          108
##  5 Cyndi Lauper        87
##  6 Bowling For Soup    77
##  7 KISS                73
##  8 Alice Cooper        63
##  9 Van Halen           55
## 10 Good Charlotte      53</code></pre>
<p>In fact, the first item in artistName seems to be rather useful, so let’s add it to the dataset.</p>
<pre class="r"><code>data &lt;- data %&gt;%
  mutate(band = map(artistName, first)) %&gt;%
  mutate(band = as.character(band))</code></pre>
<p>My motivating example was “what am I paying per track?”. Spotify is £9.99/month UK (but I’m looking at switching to the £14.99/month family package.) and this is 3 months of data. So per track, this is a very easy calculation:</p>
<pre class="r"><code>total_tracks &lt;- data %&gt;%
  nrow()

9.99 * 3 / total_tracks
## [1] 0.006802088</code></pre>
<p>0.7p/track isn’t bad. Of course, it beats a traditional store if I’m getting good diversity, otherwise I’m better off buying just what I want.</p>
<pre class="r"><code>distinct_tracks &lt;- data %&gt;%
  select(-time) %&gt;%
  unique() %&gt;%
  nrow()

9.99*3/distinct_tracks
## [1] 0.0183865</code></pre>
<p>So about 2p per track. It’ll be interesting looking at this again when I get my whole data.</p>
<p>It also means that I listened to a track 2.7030675 times on average.</p>
<p>There are timestamps on the data, and I’ve already converted them to a sensible format. Let’s get some wide looks at the data</p>
<pre class="r"><code>
g &lt;- ggplot(data, aes(x=time)) + geom_freqpoly()

ggplotly(g)</code></pre>
<div id="51ed90f4bfa" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed90f4bfa">{"x":{"data":[{"x":[1519275384,1519539973.93103,1519804563.86207,1520069153.7931,1520333743.72414,1520598333.65517,1520862923.58621,1521127513.51724,1521392103.44828,1521656693.37931,1521921283.31035,1522185873.24138,1522450463.17241,1522715053.10345,1522979643.03448,1523244232.96552,1523508822.89655,1523773412.82759,1524038002.75862,1524302592.68966,1524567182.62069,1524831772.55172,1525096362.48276,1525360952.41379,1525625542.34483,1525890132.27586,1526154722.2069,1526419312.13793,1526683902.06897,1526948492,1527213081.93103,1527477671.86207],"y":[0,4,28,116,74,169,66,70,112,63,232,143,164,242,156,120,189,332,114,297,99,157,148,79,231,154,181,133,128,254,151,0],"text":["count:   0<br />time: 1519275384","count:   4<br />time: 1519539974","count:  28<br />time: 1519804564","count: 116<br />time: 1520069154","count:  74<br />time: 1520333744","count: 169<br />time: 1520598334","count:  66<br />time: 1520862924","count:  70<br />time: 1521127514","count: 112<br />time: 1521392103","count:  63<br />time: 1521656693","count: 232<br />time: 1521921283","count: 143<br />time: 1522185873","count: 164<br />time: 1522450463","count: 242<br />time: 1522715053","count: 156<br />time: 1522979643","count: 120<br />time: 1523244233","count: 189<br />time: 1523508823","count: 332<br />time: 1523773413","count: 114<br />time: 1524038003","count: 297<br />time: 1524302593","count:  99<br />time: 1524567183","count: 157<br />time: 1524831773","count: 148<br />time: 1525096362","count:  79<br />time: 1525360952","count: 231<br />time: 1525625542","count: 154<br />time: 1525890132","count: 181<br />time: 1526154722","count: 133<br />time: 1526419312","count: 128<br />time: 1526683902","count: 254<br />time: 1526948492","count: 151<br />time: 1527213082","count:   0<br />time: 1527477672"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[1518719745.14483,1528033310.71724],"ticktext":["Mar","Apr","May","Jun"],"tickvals":[1519862400,1522540800,1525132800,1527811200],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"time","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-16.6,348.6],"ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"count","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest"},"source":"A","attrs":{"51ed539f32d6":{"x":{},"type":"ggplotly"}},"cur_data":"51ed539f32d6","visdat":{"51ed539f32d6":["function (y) ","x"]},"config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>It looks like freqpoly is the right plot, but it’s not brilliant at binning the data. I’m going to throw the lubridate package at using sensible time intervals for the binning.</p>
<pre class="r"><code>data %&gt;%
  mutate(date = round_date(time, unit = &quot;day&quot;)) %&gt;%
  group_by(date) %&gt;%
  summarise(plays = n()) %&gt;%
  plot_ly(x=~date, y=~plays, type=&quot;scatter&quot;, mode=&quot;lines&quot;)</code></pre>
<div id="51ed20de1ad4" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed20de1ad4">{"x":{"visdat":{"51eda65eda4":["function () ","plotlyVisDat"]},"cur_data":"51eda65eda4","attrs":{"51eda65eda4":{"x":{},"y":{},"mode":"lines","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"date"},"yaxis":{"domain":[0,1],"title":"plays"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["2018-02-27","2018-02-28","2018-03-02","2018-03-03","2018-03-04","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-10","2018-03-11","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-17","2018-03-18","2018-03-19","2018-03-20","2018-03-21","2018-03-22","2018-03-23","2018-03-24","2018-03-25","2018-03-26","2018-03-27","2018-03-28","2018-03-29","2018-03-30","2018-03-31","2018-04-01","2018-04-02","2018-04-03","2018-04-04","2018-04-05","2018-04-06","2018-04-07","2018-04-08","2018-04-09","2018-04-10","2018-04-11","2018-04-12","2018-04-13","2018-04-14","2018-04-15","2018-04-16","2018-04-17","2018-04-18","2018-04-19","2018-04-20","2018-04-21","2018-04-22","2018-04-23","2018-04-24","2018-04-25","2018-04-26","2018-04-27","2018-04-28","2018-04-29","2018-04-30","2018-05-01","2018-05-02","2018-05-03","2018-05-04","2018-05-05","2018-05-06","2018-05-07","2018-05-08","2018-05-09","2018-05-10","2018-05-11","2018-05-12","2018-05-13","2018-05-14","2018-05-15","2018-05-16","2018-05-17","2018-05-18","2018-05-19","2018-05-20","2018-05-21","2018-05-22","2018-05-23","2018-05-24","2018-05-25","2018-05-26","2018-05-27"],"y":[5,5,34,90,14,46,28,10,39,97,40,8,31,10,13,12,45,9,62,41,23,13,69,58,52,87,24,54,59,53,79,35,46,110,82,26,30,69,49,67,35,39,30,46,151,127,83,63,39,22,59,74,106,97,54,24,31,32,72,48,127,3,21,7,9,61,52,128,50,83,36,50,53,51,53,72,18,59,53,50,9,73,28,146,36,62,56,4],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>I think I need to check my calendar for what was so exciting about Apr 14. And May 23.</p>
<p>What about time of day?</p>
<pre class="r"><code>data %&gt;%
  mutate(hour = hour(time)) %&gt;%
  group_by(hour) %&gt;%
  summarise(plays = n()) %&gt;%
  plot_ly(x=~hour, y=~plays, mode=&quot;lines&quot;)</code></pre>
<p><div id="51ed5846ae0b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed5846ae0b">{"x":{"visdat":{"51ed5f7f5d40":["function () ","plotlyVisDat"]},"cur_data":"51ed5f7f5d40","attrs":{"51ed5f7f5d40":{"x":{},"y":{},"mode":"lines","alpha":1,"sizes":[10,100]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"hour"},"yaxis":{"domain":[0,1],"title":"plays"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],"y":[1,1,11,34,173,147,164,302,419,352,327,310,353,476,630,399,181,85,39,1,1],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script> So my busy period seems to be 17:00. Or, “When I leave work”.</p>
<p>And there’s already privacy concerns here. If I’m listening to music, then I must be awake. (Usually, anyway. In the past I have left cds playing overnight. It was rather calming.)</p>
<p>I now wonder if there is a difference in the shape of this by day?</p>
<pre class="r"><code>data %&gt;%
  mutate(day = wday(time, label = TRUE)) %&gt;%
  mutate(hour = hour(time)) %&gt;%
  group_by(hour, day) %&gt;%
  summarise(plays = n()) %&gt;%
  group_by(day) %&gt;%
  plot_ly(x=~hour, y=~plays, type=&quot;scatter&quot;, mode=&quot;lines&quot;, split=~day)</code></pre>
<p><div id="51ed77b140ec" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed77b140ec">{"x":{"visdat":{"51ed5982d9ce":["function () ","plotlyVisDat"]},"cur_data":"51ed5982d9ce","attrs":{"51ed5982d9ce":{"x":{},"y":{},"mode":"lines","split":{},"alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"hour"},"yaxis":{"domain":[0,1],"title":"plays"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],"y":[16,22,33,40,45,40,32,24,39,55,22,45,45,28,12,1],"mode":"lines","type":"scatter","name":"Sat","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"y":[30,22,26,85,72,93,79,85,98,128,159,75,48,23,11],"mode":"lines","type":"scatter","name":"Fri","line":{"fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[4,7,8,9,11,12,13,14,15,16,17,18,19],"y":[1,18,12,7,31,30,5,31,34,56,96,44,17],"mode":"lines","type":"scatter","name":"Thu","line":{"fillcolor":"rgba(44,160,44,1)","color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[6,7,8,10,11,12,13,14,15,16,17,18,19,21],"y":[11,42,20,17,38,28,18,37,32,65,70,15,7,1],"mode":"lines","type":"scatter","name":"Wed","line":{"fillcolor":"rgba(214,39,40,1)","color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[1,11,17,41,33,38,45,32,24,54,49,45,56,96,104,16],"mode":"lines","type":"scatter","name":"Tue","line":{"fillcolor":"rgba(148,103,189,1)","color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[7,8,9,10,11,12,13,14,15,16,17,18,19,21,23],"y":[13,20,18,40,102,65,20,40,26,27,93,69,2,1,1],"mode":"lines","type":"scatter","name":"Mon","line":{"fillcolor":"rgba(140,86,75,1)","color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"y":[6,13,18,42,75,99,72,119,44,79,89,94,47,46,34,14],"mode":"lines","type":"scatter","name":"Sun","line":{"fillcolor":"rgba(227,119,194,1)","color":"rgba(227,119,194,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script> It’s easier just to leave the days of the week as numeric, because I then don’t have to tell it what the ordering of days of the week is. I just read the documentation, and lubridate already has the option of returning an ordered factor.</p>
<p>It’s messy, but you can remove lines by clicking the legend.</p>
<p>Or a column chart by day:</p>
<pre class="r"><code>data %&gt;%
  mutate(day = wday(time, label = TRUE, week_start = 1)) %&gt;%
  group_by(day) %&gt;%
  summarise(plays = n()) %&gt;%
  plot_ly(x=~day, y=~plays, type = &quot;bar&quot;)</code></pre>
<div id="51ed27288463" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed27288463">{"x":{"visdat":{"51ed33c636b2":["function () ","plotlyVisDat"]},"cur_data":"51ed33c636b2","attrs":{"51ed33c636b2":{"x":{},"y":{},"alpha":1,"sizes":[10,100],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"day","type":"category","categoryorder":"array","categoryarray":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},"yaxis":{"domain":[0,1],"title":"plays"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[537,662,401,382,1034,499,891],"type":"bar","marker":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>Now, I like stacked columns. I don’t have genre data, yet, but I can look at my most common artists.</p>
<pre class="r"><code>
top_artists &lt;- pull(top_artists, artistName)

data %&gt;%
  mutate(day = wday(time, label = TRUE, week_start = 1)) %&gt;%
  filter(band %in% top_artists) %&gt;%
  group_by(day, band) %&gt;%
    summarise(plays = n()) %&gt;%
  group_by(band) %&gt;%
    plot_ly(x=~day, y=~plays, type = &quot;bar&quot;, split = ~band)</code></pre>
<div id="51ed587bfd93" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed587bfd93">{"x":{"visdat":{"51ed46287e12":["function () ","plotlyVisDat"]},"cur_data":"51ed46287e12","attrs":{"51ed46287e12":{"x":{},"y":{},"split":{},"alpha":1,"sizes":[10,100],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"day","type":"category","categoryorder":"array","categoryarray":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},"yaxis":{"domain":[0,1],"title":"plays"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[7,8,5,6,19,7,11],"type":"bar","name":"Alice Cooper","marker":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[31,49,15,7,34,4,55],"type":"bar","name":"Billy Idol","marker":{"fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[6,18,15,8,32,12,17],"type":"bar","name":"blink-182","marker":{"fillcolor":"rgba(44,160,44,1)","color":"rgba(44,160,44,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[6,10,10,8,29,7,7],"type":"bar","name":"Bowling For Soup","marker":{"fillcolor":"rgba(214,39,40,1)","color":"rgba(214,39,40,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[5,14,12,13,5,3,35],"type":"bar","name":"Cyndi Lauper","marker":{"fillcolor":"rgba(148,103,189,1)","color":"rgba(148,103,189,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[6,11,7,3,18,5,3],"type":"bar","name":"Good Charlotte","marker":{"fillcolor":"rgba(140,86,75,1)","color":"rgba(140,86,75,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[7,19,7,12,25,4,82],"type":"bar","name":"Green Day","marker":{"fillcolor":"rgba(227,119,194,1)","color":"rgba(227,119,194,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[7,8,15,11,18,7,7],"type":"bar","name":"KISS","marker":{"fillcolor":"rgba(127,127,127,1)","color":"rgba(127,127,127,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[7,23,16,12,26,10,17],"type":"bar","name":"The Offspring","marker":{"fillcolor":"rgba(188,189,34,1)","color":"rgba(188,189,34,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"y":[8,8,7,4,13,4,11],"type":"bar","name":"Van Halen","marker":{"fillcolor":"rgba(23,190,207,1)","color":"rgba(23,190,207,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>I initially kept “other” bands, but they vastly outnumbered everyone else. Let’s look at that long tail.</p>
<pre class="r"><code>data %&gt;%
  group_by(band) %&gt;%
  summarise(plays=n()) %&gt;%
  mutate(plays = plays/sum(plays)) %&gt;%
  dplyr::arrange(desc(plays)) %&gt;%
  plot_ly(y=~plays, type=&quot;scatter&quot;, mode=&quot;lines&quot;)</code></pre>
<div id="51ed372e6fc5" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed372e6fc5">{"x":{"visdat":{"51ed4ed27755":["function () ","plotlyVisDat"]},"cur_data":"51ed4ed27755","attrs":{"51ed4ed27755":{"y":{},"mode":"lines","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"title":"plays"},"xaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"y":[0.0442578302315025,0.035406264185202,0.025192918747163,0.0245120290512937,0.0197458011802088,0.0174761688606446,0.0165683159328189,0.0142986836132547,0.0124829777576033,0.0120290512936904,0.0113481615978212,0.010213345438039,0.00975941897412619,0.00975941897412619,0.00953245574216977,0.00930549251021335,0.0088515660463005,0.0088515660463005,0.00862460281434408,0.00862460281434408,0.00839763958238765,0.00817067635043123,0.00817067635043123,0.00817067635043123,0.00771674988651838,0.00771674988651838,0.00771674988651838,0.00726282342260554,0.00703586019064912,0.00658193372673627,0.00658193372673627,0.00635497049477985,0.00612800726282342,0.005901044030867,0.005901044030867,0.005901044030867,0.005901044030867,0.00544711756695415,0.00544711756695415,0.00544711756695415,0.00499319110304131,0.00499319110304131,0.00499319110304131,0.00476622787108488,0.00476622787108488,0.00453926463912846,0.00431230140717204,0.00431230140717204,0.00431230140717204,0.00431230140717204,0.00408533817521562,0.00408533817521562,0.00408533817521562,0.00385837494325919,0.00385837494325919,0.00385837494325919,0.00385837494325919,0.00363141171130277,0.00363141171130277,0.00363141171130277,0.00363141171130277,0.00340444847934635,0.00340444847934635,0.00340444847934635,0.00340444847934635,0.00340444847934635,0.00340444847934635,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.00317748524738992,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.0029505220154335,0.00272355878347708,0.00272355878347708,0.00272355878347708,0.00272355878347708,0.00272355878347708,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00249659555152065,0.00226963231956423,0.00226963231956423,0.00226963231956423,0.00226963231956423,0.00226963231956423,0.00226963231956423,0.00226963231956423,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00204266908760781,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00181570585565138,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00158874262369496,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00136177939173854,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.00113481615978212,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000907852927825692,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000680889695869269,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000453926463912846,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423,0.000226963231956423],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>So my top artist is less than 5% of my played tracks, and I’ve over 600 artists in these 3 months.</p>
<p>It looks a bit like a 1/x function, but there’s nothing really interesting in doing a regression analysis on this: the x value must be a whole number, it must be at least 1, and I’ve no interest in extrapolating past 600.</p>
<p>I’m now interested in my average session. Let’s say that if a track is more than 10 minutes after the last one, then it’s a new session. Then I can just number sessions.</p>
<pre class="r"><code>
data &lt;- data %&gt;%
  mutate(`new session` = (time - lag(time)) &gt; dminutes(10)) %&gt;%
  replace_na(list(&quot;new session&quot;=TRUE)) %&gt;%
  mutate(session = cumsum(`new session`)) %&gt;% 
  select(-`new session`)

data %&gt;%
  group_by(session) %&gt;%
  summarise(plays=n()) %&gt;%
  group_by(plays) %&gt;%
  summarise(count=n()) %&gt;%
  plot_ly(y=~count, x=~plays, type=&quot;bar&quot;)</code></pre>
<div id="51ed637cdb50" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="51ed637cdb50">{"x":{"visdat":{"51ed6cd4dbf2":["function () ","plotlyVisDat"]},"cur_data":"51ed6cd4dbf2","attrs":{"51ed6cd4dbf2":{"y":{},"x":{},"alpha":1,"sizes":[10,100],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"plays"},"yaxis":{"domain":[0,1],"title":"count"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"y":[60,29,31,39,21,17,21,23,16,13,9,9,13,6,7,6,10,7,7,4,5,5,6,1,1,1,4,1,5,3,1,1,2,1,2,1,4,2,1,2,1,1,1,1,1,1],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,31,32,33,34,35,36,39,45,47,48,49,53,60,62,64,77,108,136],"type":"bar","marker":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>I’m rather disappointed that it doesn’t appear to be one of the usual distributions. Also, when did I listen to 136 tracks back-to-back?</p>
<pre class="r"><code>data %&gt;%
  add_count(session) %&gt;%
  top_n(1, n) %&gt;%
  summarise(start=min(time), end=max(time))
## # A tibble: 1 x 2
##   start               end                
##   &lt;dttm&gt;              &lt;dttm&gt;             
## 1 2018-04-03 05:18:22 2018-04-03 13:35:24</code></pre>
<p>I don’t recall getting up at 5 that day.</p>
<p>I don’t have album data, but do have track data. First thought was to just group by track name, but…</p>
<pre class="r"><code>data %&gt;%
  select(trackName, band) %&gt;%
  unique() %&gt;%
  add_count(trackName) %&gt;%
  top_n(1) %&gt;%
  select(trackName) %&gt;%
  inner_join(data) %&gt;%
  select(trackName, band) %&gt;%
  unique()
## # A tibble: 48 x 2
##    trackName                 band            
##    &lt;chr&gt;                     &lt;chr&gt;           
##  1 Rockin&#39; In The Free World Neil Young      
##  2 Rockin&#39; In The Free World Pussy Revolution
##  3 Surrender                 Cheap Trick     
##  4 Surrender                 Less Than Jake  
##  5 Walk This Way             Aerosmith       
##  6 Walk This Way             Run–D.M.C.      
##  7 Cryin&#39;                    Aerosmith       
##  8 Cryin&#39;                    Vixen           
##  9 Dancing With Myself       Billy Idol      
## 10 Dancing With Myself       Generation X    
## # ... with 38 more rows</code></pre>
<p>Some nice examples there of the same track name covered by 2 different bands. Or the same band, under different names. So my “top track” needs to consider this. (Of course, internally Spotify will have a unique track ID, and I don’t have that.)</p>
<pre class="r"><code>data %&gt;%
  select(trackName, band) %&gt;%
  group_by_all() %&gt;%
  summarise(n()) %&gt;%
  dplyr::arrange(desc(`n()`)) %&gt;%
  head(10)
## # A tibble: 10 x 3
## # Groups:   trackName [10]
##    trackName                       band            `n()`
##    &lt;chr&gt;                           &lt;chr&gt;           &lt;int&gt;
##  1 White Wedding - Pt. 1           Billy Idol         28
##  2 The Kids Aren&#39;t Alright         The Offspring      27
##  3 Poison                          Alice Cooper       25
##  4 Barracuda                       Heart              24
##  5 Lifestyles of the Rich &amp; Famous Good Charlotte     23
##  6 All The Small Things            blink-182          22
##  7 Hit Me With Your Best Shot      Pat Benatar        20
##  8 Cum on Feel the Noize           Quiet Riot         18
##  9 The Middle                      Jimmy Eat World    18
## 10 The Rock Show                   blink-182          18</code></pre>
<p>I’m now going to look at a band that is well-represented in my dataset, and has 3 different lists of members - blink-182.</p>
<pre class="r"><code>data %&gt;%
  filter(band==&quot;blink-182&quot;) %&gt;%
  pull(artistName) %&gt;%
  map(unique) %&gt;%
  map_chr(toString) %&gt;% #So far, this undoes the bit where I turned the string of artists into a list.
  as.data.frame() %&gt;%
  group_by_all %&gt;%
  tally
## # A tibble: 5 x 2
##   .                                                                    n
##   &lt;fct&gt;                                                            &lt;int&gt;
## 1 blink-182, JOHN FELDMANN                                            12
## 2 blink-182, Mark Hoppus, Tom DeLonge, Travis Barker, Jerry Finn       7
## 3 blink-182, Tom DeLonge, Mark Hoppus, Jerry Finn                      5
## 4 blink-182, Tom DeLonge, Mark Hoppus, Travis Barker, Jerry Finn      76
## 5 blink-182, Tom DeLonge, Scott Raynor, Mark Hoppus, Mark Trombino     8</code></pre>
<p>This definitely reveals that I was misunderstood about what the artistName field was for. At first I thought it was every artist on the track, so I’d get singers, guitarists, bassists, drummers for blink-182, and split by era. Instead it seems that Spotify have merged several fields, some with incomplete information, into one field. And not documented it. So I don’t have a way to reliably identify a producer. (And I’ve just identified some producers I might want to listen to more of.)</p>
<p>So, this analysis suggests that I might want to go back to Spotify and ask them to not merge the artistName field, but keep the various fields separate.</p>
<p>Or…</p>
</div>
<div id="next-steps" class="section level2">
<h2>Next Steps</h2>
<p>Most of this analysis has focused on time of listening rather than the track data, mostly because the track data is very sparse. I’ve found my top bands, and my top tracks, but I want to go into genre(s), writers, year, who was in the band at that point, album.</p>
<p>I want to look at graph generation, and graph visualisation, so I think I’ll make a massive graph linking any two tracks that share a person.</p>
</div>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/r">R</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
            
            
                <i class="fa fa-tags"></i>
                
                
                <li><a class="article-category-link" href="/tags/eda">EDA</a></li>
                
                
                <li><a class="article-category-link" href="/tags/gdpr">GDPR</a></li>
                
                
                <li><a class="article-category-link" href="/tags/spotify">Spotify</a></li>
                
                
                <li><a class="article-category-link" href="/tags/non-open-data">non-open data</a></li>
                
                
                <li><a class="article-category-link" href="/tags/json">json</a></li>
                
            
        
    </ul>
  </li>
</ul>
  </footer>

</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "openor-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>


<ul class="actions pagination">
    
        <li><a href="/post/may-day-special-union-membership-uk/"
                class="button big previous">May Day special - union membership UK</a></li>
    

    
        <li><a href="/post/analysis-on-a-plane/"
                class="button big next">Analysis on a plane</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/'><img src="/img/Game_of_life_animated_glider.gif" class="intro-circle" width="" alt="Conway&#39;s Life glider" /></a>
      
    
    
      <header>
        <h2></h2>
        <p>Totally expe[r]imental<i class='fa fa-hand-peace-o'></i></p>
      </header>
    
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/scrabble-numbers/">Scrabble numbers</a>
              </h3>
              
              <time class="published" datetime='2018-11-11'>
                November 11, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/aint-no-sunshine-in-winter/">&#39;Aint no sunshine ... in winter</a>
              </h3>
              
              <time class="published" datetime='2018-10-19'>
                October 19, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/thanos-did-nothing-wrong/">Thanos did nothing wrong</a>
              </h3>
              
              <time class="published" datetime='2018-08-21'>
                August 21, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/analysis-on-a-plane/">Analysis on a plane</a>
              </h3>
              
              <time class="published" datetime='2018-06-13'>
                June 13, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/spotify-me/">Spotify &amp; me</a>
              </h3>
              
              <time class="published" datetime='2018-06-09'>
                June 9, 2018
              </time>
            </header>
            

          </article>
        
      </div>

      
        <a href=
          
            /post/
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  

  
  

  
  <section id="footer">
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/jimr1603" target="_blank" title="GitHub" class="fa fa-github"></a></li>














































































      </ul>
    
    <p class="copyright">
      
        &copy; 2018
        
          Open Operational Research
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    
      
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

