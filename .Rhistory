total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff)[1]
View(median_record)
median_record <- combined %>%
filter(running_total > median_staff)
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(1)
View(median_record)
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(1)
View(median_record)
median_record <- combined %>%
filter(running_total > median_staff) %>%
bottom_n(1)
?top_n
median_record <- combined %>%
filter(running_total > median_staff) %>%
bottom_n(-1)
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
View(median_record)
median_salary <- median_record$minimum
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
total_bill_year <- summary_table$`sum(Total_pay)`
mean_hourly
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
View(combined)
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
summarise(sum(Total_pay), sum(FTE))
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
source('~/bin/R/DH/organ_tibble.R', echo=TRUE)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
View(combined)
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE)
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "FS|AA|AO|EO|HEO|EO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
knitr::opts_chunk$set(collapse = TRUE)
library("here")
library("tidyverse")
```{r, message=FALSE}
View(median_record)
View(summary_table)
View(combined)
View(summary_table)
juniors <- read_csv(here("static","data","Open Government Licence", "DWP Organogram 31-Sept-2017_2-junior.csv"))
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "FS|AA|AO|EO|HEO|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv(here("static","data","Open Government Licence", "DWP Organogram 31-Sept-2017_2-senior.csv"))
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
juniors <- read_csv("department-of-health__31-03-2016__dh_010416-DH-Organogram-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("department-of-health__31-03-2016__dh_010416-DH-Organogram-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
total_bill_year <- summary_table$`sum(Total_pay)`
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
```{r, message=FALSE}
blogdown::serve_site()
setwd(here())
blogdown::serve_site()
blogdown:::new_post_addin()
blogdown::serve_site()
knitr::opts_chunk$set(collapse = TRUE)
library("here")
library("tidyverse")
library("knitr")
library("Meeting.Calculator")
meeting.calculator(20)
knitr::opts_chunk$set(collapse = TRUE)
library("here")
library("tidyverse")
library("knitr")
library("mywidget")
DWP_median = 2447
total_hours =(365.25 / 7 * 5 - 25 -9) * (37/5)
DWP_hourly = round(DWP_median/total_hours,2)
knitr::opts_chunk$set(collapse = TRUE)
library("data.table")
library("here")
library("ggplot2")
combined <- rbindlist(list(juniors,seniors))
combined <- combined[order(min)]
combined <- rbindlist(list(juniors,seniors))
combined <- combined[order(min)]
juniors = c[,.(N=sum(Number.of.Posts.in.FTE),min=min(Payscale.Minimum....),max=max(Payscale.Maximum....)),by=Grade]
knitr::opts_chunk$set(collapse = TRUE)
library("data.table")
library("here")
library("ggplot2")
c <- read.csv(here("static", "data", "Open Government Licence","department-of-health__31-03-2016__dh_010416-DH-Organogram-junior.csv"), stringsAsFactors = FALSE)
d <-read.csv(here("static", "data","Open Government Licence", "department-of-health__31-03-2016__dh_010416-DH-Organogram-senior.csv"), stringsAsFactors = FALSE)
c <- as.data.table(c)
d<- as.data.table(d)
juniors = c[,.(N=sum(Number.of.Posts.in.FTE),min=min(Payscale.Minimum....),max=max(Payscale.Maximum....)),by=Grade]
seniors = d[!(Name %in% c("N/D","ELIMINIATED", "VACANT")),.(N=sum(FTE),min=max(Actual.Pay.Floor....),max=max(Actual.Pay.Ceiling....)),by=Grade..or.equivalent.]
combined <- rbindlist(list(juniors,seniors))
combined
combined[order(min]
combined[order(min)]
combined <- rbindlist(list(juniors,seniors))
combined <- combined[order(min)]
combined[,cumulative:=cumsum(N)]
total_staff <- combined[,sum(N)]
median_record <- combined[cumulative>total_staff/2][1]
median_salary = median_record[,min]
blogdown::serve_site()
round(100,-2)
round(100,-3)
round(100,-4)
blogdown::stop_server()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown:::new_post_addin()
install.packages("reticulate")
rm(list=ls())
gc()
library(knitr)
opts_chunk$set(engine.path = '/usr/bin/python3')
library(knitr)
opts_chunk$set(engine.path = '/usr/bin/python3')
library("knitr")
library("tibble")
library("dplyr")
opts_chunk$set(engine.path = '/usr/bin/python3')
?read_csv
results
results <- read_csv("table.csv",  col_names=FALSE)
here()
?mutate
library(knitr)
library(tidyverse)
opts_chunk$set(engine.path = '/usr/bin/python3')
results <- read_csv("table.csv",  col_names=FALSE)
results <- results %>%
mutate(`X2` =  round(X2)) %>%
arrange(`X2`)
print(results)
results <- read_csv("table.csv",  col_names=FALSE)
results <- results %>%
rename(`name`=`X1`, `distance(m)`=`X2`)
mutate(`X2` =  round(X2)) %>%
arrange(`X2`)
View(results)
results <- read_csv("table.csv",  col_names=FALSE)
results <- results %>%
rename(`name`=`X1`, `distance(m)`=`X2`)
mutate(`distance(m)` =  round(`distance(m)`)) %>%
arrange(`distance(m)`)
results <- read_csv("table.csv",  col_names=FALSE)
results <- results %>%
rename(`name`=`X1`, `distance(m)`=`X2`) %>%
mutate(`distance(m)` =  round(`distance(m)`)) %>%
arrange(`distance(m)`)
print(results)
blogdown::serve_site()
getwd()
library(knitr)
library(tidyverse)
knitr::opts_chunk$set(
engine.path = "/usr/bin/python3"
)
print(getwd())
blogdown::stop_server()
blogdown::serve_site()
blogdown::build_site()
blogdown::build_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
blogdown::build_site()
blogdown::new_content()
blogdown::blogdown
blogdown::blogdown_site
?blogdown::build_site()
?build_site()
?hugo_build()
blogdown::hugo_cmd("hugo")
blogdown::hugo_cmd("")
blogdown::hugo_cmd("")
blogdown::hugo_cmd("make")
?build_site()
?build_site()
blogdown::build_rmds()
blogdown::hugo_build()
blogdown::build_dir()
blogdown::hugo_build()
blogdown::build_site()
?hugo_build
blogdown::hugo_build()
blogdown::build_site()
blogdown::build_dir()
blogdown::build_dir(".")
getwd()
getwd
getwd()
dir()
blogdown::new_site("laozhu/hugo-nuo")
blogdown::new_site(theme="laozhu/hugo-nuo")
blogdown:::new_post_addin()
blogdown:::new_post_addin()
getwd()
