t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(t, avg_cost = avg/n)
class(t$avg)
t <- tibble(n=1:3)
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean))
View(t)
class(t$avg)
t$avg$1
t$avg[1]
mutate(t,avg = unlist(avg))
t <- tibble(n=1:3)
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(t,avg = unlist(avg)) %>%
mutate( avg_cost = avg/n)
View(t)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(n=1:300)
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(t,avg = unlist(avg)) %>%
mutate( avg_cost = avg/n)
View(t)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(n=1:3)
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/n)
View(t)
t <- tibble(n=seq(1,1000,10))
View(t)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(n=seq(1=1,1001,10))
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/n)
t <- tibble(n=seq(1=1,1001,10))
t <- tibble(n=seq(1,1001,10))
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(n=seq(1,1001,10))
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/n)
View(t)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(1,101,10))
t <- t %>%
mutate(micro = map(t$n,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(1,101,10))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
View(t)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(10,10^6,10))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(10,10^4,10))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(10,10^4,100))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
ggplot(t) + aes(c(x=runs, y=avg_cost)) + geom_col()
ggplot(t) + aes(x=runs, y=avg_cost) + geom_line()
library(microbenchmark)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
t <- tibble(runs=seq(10^3,10^5,10^3))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
ggplot(t) + aes(x=runs, y=avg_cost) + geom_line()
library(microbenchmark)
library(MonteCarlo)
micro_monte(n){
micro <- microbenchmark(n)
return(mean(n$times))
}
micro_monte(n) {
micro <- microbenchmark(n)
return(mean(micro$times))
}
micro_monte <- function(n){
micro <- microbenchmark(n)
return(mean(micro$times))
}
micro_monte(5)
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(mean(micro$times))
}
micro_monte(5)
micro <- microbenchmark(runif(5))
micro
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(mean(micro$time))
}
micro_monte(5)
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(mean(micro$time)/n)
}
micro_monte(5)
?MonteCarlo
MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1)
library(microbenchmark)
library(MonteCarlo)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return("time"=mean(micro$time)/n)
}
micro <- microbenchmark(runif(5))
t <- tibble(runs=seq(10^3,10^5,10^3))
t <- t %>%
mutate(micro = map(t$runs,f)) %>%
mutate(avg  = map(micro, micro_mean)) %>%
mutate(avg = unlist(avg)) %>%
mutate( avg_cost = avg/runs)
library(microbenchmark)
library(MonteCarlo)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return("time"=mean(micro$time)/n)
}
micro <- microbenchmark(runif(5))
View(micro)
micro <- micro_monte(5)
MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1)
library(microbenchmark)
library(MonteCarlo)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(list("time"=mean(micro$time)/n))
}
micro <- micro_monte(5)
MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2)
library(snowfall)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:1000)), nrep = 1, ncpus = 2)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:1000)), nrep = 1, ncpus = 2)
MC
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10^5)), nrep = 1, ncpus = 2, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10^5)), nrep = 1, ncpus = 2, time_n_test = TRUE, max_grid = 10^6)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2, time_n_test = TRUE, max_grid = 10^6)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:1000)), nrep = 1, ncpus = 2, time_n_test = TRUE)
rm(list=ls())
library(microbenchmark)
library(MonteCarlo)
f <- function(n){
microbenchmark(n)
}
micro_mean <- function(micro){
mean(micro$time)
}
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(list("time"=mean(micro$time)/n))
}
library(snowfall)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:1000)), nrep = 1, ncpus = 2, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 1, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1,  time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 2, time_n_test = TRUE)
list("n"=c(1:10))
rm(MC)
MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, time_n_test = TRUE)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2)
MC <- MonteCarlo(micro_monte, param_list = list("n"=c(1:10)), nrep = 1, ncpus = 2)
tibble_gen <- function(n){
return(tibble(runs = seq((n*1000),((n+1)*10000))))
}
t <- tibble_gen(1)
View(t)
tibble_gen <- function(n){
return(tibble(runs = seq((n*1000),((n+1)*1000))))
}
t <- tibble_gen(1)
tibble_gen <- function(n){
return(tibble(runs = seq((n*1000),((n+1)*1000 -1))))
}
t <- tibble_gen(1)
t <- tibble_gen(1:10)
a <- 1:10
t <- map(1:10, tibble_gen)
t
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(list("time"=mean(micro$time)/n))
}
t<- tibble(runs=1:10)
t <- t %>%
mutate(micro = map(t$runs,micro_monte))
View(t)
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(mean(micro$time))
}
t <- tibble(runs=seq(10^3,10^5,10^3))
t<- tibble(runs=1:10)
t<- tibble(runs=1:10)
t <- t %>%
mutate(micro = map(t$runs,micro_monte))
View(t)
micro_monte <- function(n){
if (n%100==0){
print(n)
}
micro <- microbenchmark(runif(n))
return(mean(micro$time))
}
micro_monte <- function(n){
if (n%100==0) {
print(n)
}
micro <- microbenchmark(runif(n))
return(mean(micro$time))
}
micro_monte <- function(n){
if (n%%100==0) {
print(n)
}
micro <- microbenchmark(runif(n))
return(mean(micro$time))
}
t<- tibble(runs=1:10)
t <- t %>%
mutate(micro = map(t$runs,micro_monte))
t<- tibble(runs=1:150)
t <- t %>%
mutate(micro = map(t$runs,micro_monte))
getwd
getwd()
setwd(..)
setwd("..")
getwd()
t<- 1:10
for (i in t){
write.csv(c(n,micro_monte(i)),append=TRUE)
}
t<- 1:10
for (i in t){
write.csv(c(i,micro_monte(i)),append=TRUE)
}
t<- 1:10
for (i in t){
write.csv(c(i,micro_monte(i)),append=TRUE, file = "optimumrandomness.csv")
}
t<- 1:10
for (i in t){
line = paste(i, micro_monte(i), sep=",")
write(file = "optimumrandomness.csv", line, append = TRUE)
}
micro_monte <- function(n){
micro <- microbenchmark(runif(n))
return(mean(micro$time)/n)
}
t<- 1:100
for (i in t){
line = paste(i, micro_monte(i), sep=",")
write(file = "optimumrandomness.csv", line, append = TRUE)
}
i<-1
while(TRUE){
i <- i+1
line = paste(i, micro_monte(i), sep=",")
write(file = "optimumrandomness.csv", line, append = TRUE)
}
t<- 1:10^7
for (i in t){
line = paste(i, micro_monte(i), sep=",")
write(file = "optimumrandomness.csv", line, append = TRUE)
}
t <- read_csv("optimumrandomness.csv")
t <- read_csv("optimumrandomness.csv",col_names = FALSE)
View(t)
ggplot(t) + aes(x=X1, y=X2) + geom_line()
121000*2
(121000*2)/(60*60)
blogdown:::new_post_addin()
blogdown::serve_site()
install.packages("data.tree")
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
knitr::opts_chunk$set(collapse = TRUE)
library("tidyverse")
library("here")
library("ggplot2")
library("data.tree")
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
View(mortality_tables)
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30)
?rename
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30) %>%
rename(p_death = Males) %>%
mutate(p_survive = 1-p_death)
View(James_example)
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30) %>%
rename(p_death = Males) %>%
mutate(p_survive = 1-p_death) %>%
mutate(survive_at_least = cumprod(p_survive))
View(James_example)
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30) %>%
rename(p_death = Males) %>%
mutate(p_survive = 1-p_death) %>%
mutate(survive_at_least = cumprod(p_survive))
ggplot(James_example) + aes(x=Age, y=survive_at_least) + geom_column()
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30) %>%
rename(p_death = Males) %>%
mutate(p_survive = 1-p_death) %>%
mutate(survive_at_least = cumprod(p_survive))
ggplot(James_example) + aes(x=Age, y=survive_at_least) + geom_col()
mortality_tables <- read_csv(here("static","data","Open Government Licence","uk mortality 14-16.csv"))
James_example <- mortality_tables %>%
select(-Females) %>%
filter(Age>=30) %>%
rename(p_death = Males) %>%
mutate(p_survive = 1-p_death) %>%
mutate(survive_at_least = cumprod(p_survive)) %>%
mutate(die_at_exactly = survive_at_least * p_death)
ggplot(James_example) + aes(x=Age, y=survive_at_least) + geom_col()
ggplot(James_example) + aes(x=Age, y=die_at_exactly) + geom_col()
blogdown::stop_server()
James_example %>% filter(Age==50) %>% select(p_survive_at_least)
James_example %>% filter(Age==50)
James_example %>% filter(Age==50) %>% select(survive_at_least)
blogdown::serve_site()
blogdown:::serve_site()
blogdown::stop_server()
blogdown:::serve_site()
James_example %>% filter(survive_at_least<0.5) %>% min(Age)
James_example %>% filter(survive_at_least<0.5)
James_example $>$ filter(die_at_exactly==max(James_example$die_at_exactly))
James_example %>% filter(die_at_exactly==max(James_example$die_at_exactly))
?ggsave
blogdown:::serve_site()
600/60*10
600/60
knitr::opts_chunk$set(
message = FALSE,
warning = FALSE,
collapse = TRUE
)
library("tidyverse")
library("lubridate")
library("ggplot2")
words_per_minute <- 400
transfer_rate <- words_per_minute /
(60*pull(summarise(words, mean(`bytes per word`))))
knitr::opts_chunk$set(
message = FALSE,
warning = FALSE,
collapse = TRUE
)
library("tidyverse")
library("lubridate")
library("ggplot2")
words <- read_csv("~/bin/R/Analyse books/library word analysis.csv") %>% select(-`estimated reading time`)
words_per_minute <- 400
transfer_rate <- words_per_minute /
(60*pull(summarise(words, mean(`bytes per word`))))
words <- words %>%
mutate(`estimated reading time` = as.duration(60*words/words_per_minute))
View(words)
transfer_rate <- words_per_minute /
(60*pull(summarise(words, mean(`bytes per word`))))
View(words)
pull(summarise(words, mean(`bytes per word`)))
transfer_rate <- pull(summarise(words, mean(`bytes per word`))) * words_per_minute /
(60)
1000/transfer_rate
1/transfer_rate
100/transfer_rate
56*1000 / transfer_rate
transfer_rate / (56e3)
percent(transfer_rate / (56e3))
library(formatR)
100 * transfer_rate / (56e3)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::insert_image_addin()
blogdown:::serve_site()
blogdown::stop_server()
install.packages('rvest')
