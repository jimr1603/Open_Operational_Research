arrange(aminimum)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`) %>%
group_by(Grade) %>%
arrange(aminimum)
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`) %>%
group_by(Grade) %>%
arrange(minimum)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`) %>%
group_by(Grade) %>%
arrange(minimum)
View(juniors)
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`) %>%
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`) %>%
combined <- bind_rows(juniors, seniors)
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`) %>%
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`) %>%
combined <- bind_rows(juniors, seniors)
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors)
View(combined)
median(combined)
summarise(combined, median)
?sumarise
?summarise
summarise(combined$minimum, median)
summarise(combined$FTE median)
summarise(combined$FTE, median)
median()
?median()
summarise(combined, med= median(FTE))
summarise(combined, med= median(Grade))
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum)
summarise(combined, med= median(Grade))
summarise(combined, med= median)
summarise(combined, median)
summarise_all(combined, median)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
summarise_all(combined, median)
View(combined)
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
select(minimum>0) %>%
mutate(running_total = cumsum(FTE))
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
View(summary_table)
View(combined)
median(combined$running_total)
seniors <- seniors
View(seniors)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
View(seniors)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
View(combined)
total_staff <- last(combined$running_total)
total_staff <- last(combined$running_total)
median_record <- combined %>%
filter(running_total > median_staff)
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff)
View(median_record)
median_record <- combined %>%
filter(running_total > median_staff)[1]
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff)[1]
View(median_record)
median_record <- combined %>%
filter(running_total > median_staff)
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(1)
View(median_record)
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(1)
View(median_record)
median_record <- combined %>%
filter(running_total > median_staff) %>%
bottom_n(1)
?top_n
median_record <- combined %>%
filter(running_total > median_staff) %>%
bottom_n(-1)
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
View(median_record)
median_salary <- median_record$minimum
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
total_bill_year <- summary_table$`sum(Total_pay)`
mean_hourly
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
View(combined)
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
summarise(sum(Total_pay), sum(FTE))
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
source('~/bin/R/DH/organ_tibble.R', echo=TRUE)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
View(combined)
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE)
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
View(combined)
library(tidyverse)
library(ggplot2)
library(here)
rm(list=ls())
setwd("~/bin/R/DH")
juniors <- read_csv("DWP Organogram 31-Sept-2017_2-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "FS|AA|AO|EO|HEO|EO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("DWP Organogram 31-Sept-2017_2-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
total_bill_year <- summary_table$`sum(Total_pay)`
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
total_hours <- (365.25 / 7 * 5 - 25 -9) * (37/5)
avg_hourly <- median_salary/total_hours
avg_minutely <- avg_hourly/60
print(total_staff)
print(median_salary)
total_bill_min <- total_bill_year / total_hours
print(total_bill_min)
avg_hourly
knitr::opts_chunk$set(collapse = TRUE)
library("here")
library("tidyverse")
```{r, message=FALSE}
View(median_record)
View(summary_table)
View(combined)
View(summary_table)
juniors <- read_csv(here("static","data","Open Government Licence", "DWP Organogram 31-Sept-2017_2-junior.csv"))
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "FS|AA|AO|EO|HEO|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv(here("static","data","Open Government Licence", "DWP Organogram 31-Sept-2017_2-senior.csv"))
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
juniors <- read_csv("department-of-health__31-03-2016__dh_010416-DH-Organogram-junior.csv")
juniors <- juniors %>%
select(contains("Grade"), contains("FTE"), contains("minimum")) %>%
mutate(Grade = str_extract(Grade, "AA|AO|EO|HEO|FS|SEO|G7|G6")) %>%
rename(minimum =  `Payscale Minimum (£)`) %>%
rename(FTE = `Number of Posts in FTE`)
seniors <-read_csv("department-of-health__31-03-2016__dh_010416-DH-Organogram-senior.csv")
seniors <- seniors %>%
filter(Name != "N/A") %>%
select(contains("Grade"), contains("FTE"), contains("Floor")) %>%
rename(minimum =  `Actual Pay Floor (£)`) %>%
filter(minimum > 0) %>%
rename(Grade = `Grade (or equivalent)`)
combined <- bind_rows(juniors, seniors) %>%
arrange(minimum) %>%
mutate(running_total = cumsum(FTE))
total_staff <- last(combined$running_total)
median_staff <- total_staff/2
median_record <- combined %>%
filter(running_total > median_staff) %>%
top_n(-1)
median_salary <- median_record$minimum
combined <- combined %>%
group_by(Grade) %>%
summarise(Total_pay = sum(FTE * minimum), FTE=sum(FTE)) %>%
mutate(avg_minimum = Total_pay / FTE) %>%
arrange(avg_minimum)
summary_table <- combined %>%
summarise(sum(Total_pay), sum(FTE))
total_bill_year <- summary_table$`sum(Total_pay)`
Grades = combined$Grade
combined <- mutate(combined, Grade = factor(Grade, levels = Grades, ordered=TRUE))
ggplot(combined, aes(y=FTE,x=Grade)) + geom_col()
```{r, message=FALSE}
blogdown::serve_site()
setwd(here())
blogdown::serve_site()
