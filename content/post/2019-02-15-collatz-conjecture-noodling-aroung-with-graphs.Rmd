---
title: Collatz Conjecture & noodling aroung with graphs
author: James Riley
date: '2019-02-15'
slug: collatz-conjecture-noodling-aroung-with-graphs
categories:
  - R
tags:
  - xkcd
  - pure mathematics
  - Graph theory
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
	message = FALSE,
	warning = FALSE,
	collapse = TRUE
)
library("tidyverse")
library("igraph")

theme <- ggthemes::theme_few()
scale <- ggthemes::scale_colour_few()
```

With thanks to [this tutorial on network analysis  in R](http://kateto.net/netscix2016)

XKCD references the Callatz Conjecture:

![Collatz Conjecture](https://imgs.xkcd.com/comics/collatz_conjecture.png)

Extending this isn't going to prove or disprove it, but might make some pretty graphs.

A simple way for dealing with the Callatz function:

```{r}
callatz <- function(n){
  n = round(n, 0)
  
  case_when(
    n<2  ~ NA_real_,
    n %% 2 == 0 ~ n/2,
    TRUE ~ 3*n+1
  )
}
```

Special behaviour forced for the case where n=1. 

It works on 1:10:

```{r}

callatz(1:10)

```

Which can be thrown at the first 1000 integers and turned into a graph:

```{r}
edges <- tibble(from = 2:100, to=callatz(from))

graph <- graph_from_data_frame(edges)

plot(graph)

```

Err, no. First, let's filter out the component that connects to 1:

And force it to not draw an arrow going from 1.
```{r}
com <- which(components(graph)$membership == 1) %>%
  names() %>%
  as.numeric() 

com <- com[com!=1]

sub <- graph_from_data_frame(tibble(from = com, to=callatz(from)) )

plot(sub, vertex.shape="none", layout=layout_with_lgl)


