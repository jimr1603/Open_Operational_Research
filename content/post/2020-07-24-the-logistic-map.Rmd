---
title: The Logistic Map
author: James Riley
date: '2020-08-01'
slug: the-logistic-map
categories:
  - R
tags:
  - chaos
  - fractal
  - Plotly
description: ''
featured: ''
featuredalt: ''
featuredpath: ''
linktitle: ''
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	message = FALSE,
	warning = FALSE,
	collapse = TRUE
)
set.seed(as.Date('2020-07-24'))
library(tidyverse)
library(plotly)

```

My [favourite bookshop](https://www.openstreetmap.org/way/265766058) reopened, and I found a [nice little book on chaos](https://openlibrary.org/books/OL18425957M/The_New_Scientist_guide_to_chaos) that needed to come home with me.

I'd usually talk about the maths of the [logistic map](https://en.wikipedia.org/wiki/Logistic_map), but Wikipedia did it better.

I'm more interested in this 1991 book saying that home computers are not powerful enough to show this chaos, but a Cray supercomputer can manage it.

I then remembered that plotly can make scatterplots that you can zoom into. I've had to tweak this epsilon so that this graph doesn't take _forever_ to load.


```{r}
epsilon <- 0.001

population <- list(x = seq(0.1,0.9,length.out=100), lambda = seq(0,4,by=epsilon)) %>% 
  cross_df() %>% 
  mutate(generation=0)


tick <- function(pop, history=100){
  pop %>% 
    top_n(1,generation) %>% 
    mutate(x=lambda * x * (1-x)) %>% 
    mutate(generation=generation+1) %>% 
    bind_rows(top_n(pop,history,generation)) #Ugly hack
 
}

```


```{r}
for(i in 1:1e3){
  population <- tick(population)
}
```


```{r}
population %>% 
  mutate(x = round(x/epsilon)*epsilon) %>% 
  distinct() %>% 
  plot_ly(x=~lambda,y=~x, marker=list(size=1) ) %>% 
  add_markers()

```