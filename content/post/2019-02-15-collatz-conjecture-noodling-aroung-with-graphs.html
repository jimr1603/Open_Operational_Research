---
title: Collatz Conjecture & noodling aroung with graphs
author: James Riley
date: '2019-02-15'
slug: collatz-conjecture-noodling-aroung-with-graphs
categories:
  - R
tags:
  - xkcd
  - pure mathematics
  - Graph theory
---



<p>With thanks to <a href="http://kateto.net/netscix2016">this tutorial on network analysis in R</a></p>
<p>XKCD references the Callatz Conjecture:</p>
<div class="figure">
<img src="https://imgs.xkcd.com/comics/collatz_conjecture.png" alt="Collatz Conjecture" />
<p class="caption">Collatz Conjecture</p>
</div>
<p>Extending this isn’t going to prove or disprove it, but might make some pretty graphs.</p>
<p>A simple way for dealing with the Callatz function:</p>
<pre class="r"><code>callatz &lt;- function(n){
  n = round(n, 0)
  
  case_when(
    n&lt;2  ~ NA_real_,
    n %% 2 == 0 ~ n/2,
    TRUE ~ 3*n+1
  )
}</code></pre>
<p>Special behaviour forced for the case where n=1.</p>
<p>It works on 1:10:</p>
<pre class="r"><code>
callatz(1:10)
##  [1] NA  1 10  2 16  3 22  4 28  5</code></pre>
<p>Which can be thrown at the first 1000 integers and turned into a graph:</p>
<pre class="r"><code>edges &lt;- tibble(from = 2:100, to=callatz(from))

graph &lt;- graph_from_data_frame(edges)

plot(graph)</code></pre>
<p><img src="/post/2019-02-15-collatz-conjecture-noodling-aroung-with-graphs_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Err, no. First, let’s filter out the component that connects to 1:</p>
<p>And force it to not draw an arrow going from 1.</p>
<pre class="r"><code>com &lt;- which(components(graph)$membership == 1) %&gt;%
  names() %&gt;%
  as.numeric() 

com &lt;- com[com!=1]

sub &lt;- graph_from_data_frame(tibble(from = com, to=callatz(from)) )

plot(sub, vertex.shape=&quot;none&quot;, layout=layout_with_lgl)</code></pre>
<p><img src="/post/2019-02-15-collatz-conjecture-noodling-aroung-with-graphs_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
